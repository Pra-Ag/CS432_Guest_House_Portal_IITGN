{% extends 'hospitality_staff_dashboard.html' %}
{% block content %}

<h2 class="text-centered"> Billings </h2>

<h2 class="mt-4">Unpaid Bills:</h2>

{% if unpaid_bills %}
<div>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Bill ID</th>
                <th>Date</th>
                <th>Type</th>
                <th>Payment Method</th>
                <th>Generated By</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            {% for unpaid_bill in unpaid_bills %}
            <tr>
                <td>{{ unpaid_bill.bill_id }}</td>
                <td>{{ unpaid_bill.date_created }}</td>
                <td>{{ unpaid_bill.bill_type }}</td>
                <td>{{ unpaid_bill.payment_method }}</td>
                <td>{{ unpaid_bill.generated_by }}</td>
                <td>{{ unpaid_bill.description }}</td>
                <td>{{ unpaid_bill.amount }}</td>
                <td>
                    <form method="POST" action="{{ url_for('hospitality_staff_dashboard.pay_bill', bill_id = unpaid_bill.bill_id) }}">
                        <button type="submit">Pay</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<h3 style="text-align: left;">
    Amount to Pay: {{ total_unpaid_amount }}
</h3>

{% else %}
    <p>No unpaid bills.</p>
{% endif %}

<h2 class="mt-4">Paid Bills:</h2>
{% if paid_bills %}
<div style="overflow: auto; height: 300px;">
    <table class="table table-bordered table-striped"> 
        <thead>
            <tr>
                <th>Bill ID</th>
                <th>Date</th>
                <th>Type</th>
                <th>Payment Method</th>
                <th>Generated By</th>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>

        <tbody>
            {% for paid_bill in paid_bills %}
            <tr>
                <td>{{ paid_bill.bill_id }}</td>
                <td>{{ paid_bill.date_created }}</td>
                <td>{{ paid_bill.bill_type }}</td>
                <td>{{ paid_bill.payment_method }}</td>
                <td>{{ paid_bill.generated_by }}</td>
                <td>{{ paid_bill.description }}</td>
                <td>{{ paid_bill.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<h3 style="text-align: left;">
    Paid Amount: {{ total_paid_amount }}
</h3>

{% else %}
    <p>No paid bills.</p>
{% endif %}

{% endblock %}