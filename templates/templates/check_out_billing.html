{% extends 'hospitality_staff_dashboard.html' %}
{% block content %}

<h1 class="text-center"> Check-Out Billings </h1>

<h2>Paid Bills:</h2>

{% if paid_bills %}
<div style="overflow: auto; height: 300px;">
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Bill ID</th>
                <th>Date</th>
                <th>Type</th>
                <th>Payment Method</th>
                <th>Generated By</th>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>

        <tbody>
            {% for paid_bill in paid_bills %}
            <tr>
                <td>{{ paid_bill.bill_id }}</td>
                <td>{{ paid_bill.date_created }}</td>
                <td>{{ paid_bill.bill_type }}</td>
                <td>{{ paid_bill.payment_method }}</td>
                <td>{{ paid_bill.generated_by }}</td>
                <td>{{ paid_bill.description }}</td>
                <td>{{ paid_bill.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
    <p>No paid bills.</p>
{% endif %}

<h2>Unpaid Bills:</h2>

{% if unpaid_bills %}
<div style="overflow: auto; height: 300px;">
    <table>
        <thead>
            <tr>
                <th>Bill ID</th>
                <th>Date</th>
                <th>Type</th>
                <th>Payment Method</th>
                <th>Generated By</th>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>

        <tbody>
            {% for unpaid_bill in unpaid_bills %}
            <tr>
                <td>{{ unpaid_bill.bill_id }}</td>
                <td>{{ unpaid_bill.date_created }}</td>
                <td>{{ unpaid_bill.bill_type }}</td>
                <td>{{ unpaid_bill.payment_method }}</td>
                <td>{{ unpaid_bill.generated_by }}</td>
                <td>{{ unpaid_bill.description }}</td>
                <td>{{ unpaid_bill.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<h3 style="text-align: center;">
    Amount to Pay: {{ total_unpaid_amount }}
</h3>

<p>Select the payment_method below and click on the continue button after the bills have been paid.</p>

<form method="POST" action="{{ url_for ('hospitality_staff_dashboard.check_out_billing', guest_id=guest_id) }}">
    <h3 style="text-align: center;">
        Payment Method:
        <select name="payment_method" id="payment_method">
            <option value="cash">Cash</option>
            <option value="credit_card">Credit Card</option>
            <option value="debit_card">Debit Card</option>
            <option value="net_banking">Net Banking</option>
        </select>
    </h3>

<div>
    <button>Submit</button>
</div>

</form>

{% else %}
    <p>No unpaid bills.</p>

    <form method="POST" action="{{ url_for('hospitality_staff_dashboard.check_out_guest', guest_id = guest_id) }} ">
        <button type="submit">Check Out</button>
    </form>
{% endif %}

{% endblock %}
